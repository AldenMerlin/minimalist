<html>
  <head>
    <title>minimalist</title>
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.5/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-resource/1.6.5/angular-resource.js"></script>
    <link rel="stylesheet" href="/vendor.css" />
  </head>

  <body>
    <section>
      <h2>vanilla</h2>
      <mn-form class="mn-layout-row">
        <mn-search placeholder="House" required></mn-search>
        <mn-button submit>submit</mn-button>
      </mn-form>
    </section>

    <section ng-app="app" ng-controller="HomeController as controller">
      <h2>angular</h2>
      <mn-form class="mn-layout-row">
        <!-- <mn-date placeholder="Date {{ controller.date }}" ng-model='controller.date'></mn-date>
        <mn-input placeholder="Name {{ controller.name }}" ng-model='controller.name'></mn-input> -->
        <mn-search class="houses" placeholder="House {{ controller.house }}" required ng-model="controller.house"></mn-search>
        <mn-button submit>submit</mn-button>
        <mn-button ng-click='controller.change()'>change model to lannister</mn-button>
      </mn-form>
    </section>

    <script src="/vendor.js"></script>
    <script>
      const search = document.querySelector('[ng-app] mn-search')

      // search.addEventListener('search', (event) => {
      //   const params = new URLSearchParams()
      //   params.append('query', event.query)
      //   const houses = new Request(`http://localhost:4000/houses?${params}`)

      //   event.target
      //     .fetch(houses)
      //     .then(setOptions)

      //   async function setOptions(response) {
      //     const houses = await response.json()
      //     houses.forEach(house => {
      //       // const obj = {name: house, value: house.toLowerCase()}
      //       const option = document.createElement('option')
      //       option.textContent = house//obj.name
      //       option.setAttribute('value', house.toLowerCase())//JSON.stringify(obj))

      //       event.target.appendChild(option)
      //     })
      //   }
      // })

    </script>
  </body>
</html>
